{"ast":null,"code":"import _regeneratorRuntime from\"D:/memories/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/memories/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/memories/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Button,Typography}from'@mui/material';import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import'./CommentCard.css';// import { Delete } from '@mui/icons-material';\nimport DeleteIcon from'@mui/icons-material/Delete';import{useDispatch,useSelector}from'react-redux';import{getUserFeed}from'../../features/Posts/postSlice';// import { deleteCommentOnPost } from '../../Actions/Post';\n// import { getFollowingPosts, getMyPosts } from '../../Actions/User';\n// import getFollowingPosts from '.';\nimport{deleteComment}from'../../features/Posts/postSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommentCard=function CommentCard(_ref){var userId=_ref.userId,comment=_ref.comment,commentId=_ref.commentId,postId=_ref.postId,token=_ref.token,postUser=_ref.postUser,loggedInUser=_ref.loggedInUser;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userInComment=_useState2[0],setUserInComment=_useState2[1];// const { user } = useSelector((state) => state.user);\n// const token=user.token;\nvar dispatch=useDispatch();var deleteCommentHandle=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var commentData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:// console.log(\" delete button clicked\");\ncommentData={id:postId,commentId:commentId};dispatch(deleteComment(commentData));dispatch(getUserFeed());window.location.reload();case 4:case\"end\":return _context.stop();}},_callee);}));return function deleteCommentHandle(){return _ref2.apply(this,arguments);};}();useEffect(function(){getData(userId);},[userId,token]);var getData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,user;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:5000/api/users/\".concat(userId),{headers:{Authorization:\"Bearer \".concat(token)}});case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:user=_context2.sent;setUserInComment(user);case 7:case\"end\":return _context2.stop();}},_callee2);}));return function getData(){return _ref3.apply(this,arguments);};}();if(!userInComment){// User data is loading or not available yet\nreturn/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}// console.log(userId);\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"commentUser\",children:[/*#__PURE__*/_jsx(\"img\",{src:userInComment.profilePicture,alt:userInComment.name}),/*#__PURE__*/_jsx(Typography,{style:{minWidth:'6vmax',fontWeight:'bold',color:'black'},children:userInComment.name}),/*#__PURE__*/_jsx(Typography,{children:comment}),loggedInUser===userId?/*#__PURE__*/_jsx(Button,{onClick:deleteCommentHandle,children:/*#__PURE__*/_jsx(DeleteIcon,{})}):loggedInUser===postUser?/*#__PURE__*/_jsx(Button,{onClick:deleteCommentHandle,children:/*#__PURE__*/_jsx(DeleteIcon,{})}):null]});};export default CommentCard;","map":{"version":3,"names":["Button","Typography","React","useState","useEffect","Link","DeleteIcon","useDispatch","useSelector","getUserFeed","deleteComment","CommentCard","userId","comment","commentId","postId","token","postUser","loggedInUser","userInComment","setUserInComment","dispatch","deleteCommentHandle","commentData","id","window","location","reload","getData","fetch","headers","Authorization","res","json","user","profilePicture","name","minWidth","fontWeight","color"],"sources":["D:/memories/frontend/src/components/CommentCard/CommentCard.jsx"],"sourcesContent":["import { Button, Typography } from '@mui/material';\r\nimport React,{useState,useEffect}from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './CommentCard.css';\r\n// import { Delete } from '@mui/icons-material';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getUserFeed } from '../../features/Posts/postSlice';\r\n// import { deleteCommentOnPost } from '../../Actions/Post';\r\n// import { getFollowingPosts, getMyPosts } from '../../Actions/User';\r\n// import getFollowingPosts from '.';\r\nimport { deleteComment } from '../../features/Posts/postSlice';\r\nconst CommentCard = ({\r\n  userId, // the person who commented\r\n  comment,\r\n  commentId,\r\n  postId,\r\n  token,\r\n  postUser,\r\n  loggedInUser,\r\n}) => {\r\n  const [userInComment, setUserInComment] = useState(null);\r\n  // const { user } = useSelector((state) => state.user);\r\n  // const token=user.token;\r\n  const dispatch = useDispatch();\r\n\r\n  const deleteCommentHandle = async () => {\r\n    // console.log(\" delete button clicked\");\r\n    const commentData={\r\n      id:postId,\r\n      commentId:commentId,\r\n    }\r\n\r\n  dispatch(deleteComment(commentData));\r\n  dispatch(getUserFeed());\r\n   window.location.reload();\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData(userId);\r\n   \r\n  }, [userId, token]);\r\n\r\n  const getData = async () => {\r\n    const res = await fetch(`http://localhost:5000/api/users/${userId}`, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    });\r\n    const user = await res.json();\r\n    setUserInComment(user);\r\n \r\n  };\r\n\r\n  if (!userInComment) {\r\n    // User data is loading or not available yet\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  // console.log(userId);\r\n  return (\r\n    <div className='commentUser'>\r\n      <img src={userInComment.profilePicture} alt={userInComment.name} />\r\n      <Typography\r\n        style={{ minWidth: '6vmax', fontWeight: 'bold', color: 'black' }}\r\n      >\r\n        {userInComment.name}\r\n      </Typography>\r\n\r\n      <Typography>{comment}</Typography>\r\n      {loggedInUser === userId ? (\r\n        <Button onClick={deleteCommentHandle}>\r\n          <DeleteIcon />\r\n        </Button>\r\n      ) : loggedInUser === postUser ? (\r\n        <Button onClick={deleteCommentHandle}>\r\n          <DeleteIcon />\r\n        </Button>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentCard;\r\n"],"mappings":"8UAAA,OAASA,MAAM,CAAEC,UAAU,KAAQ,eAAe,CAClD,MAAOC,MAAK,EAAEC,QAAQ,CAACC,SAAS,KAAM,OAAO,CAC7C,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,mBAAmB,CAC1B;AACA,MAAOC,WAAU,KAAM,4BAA4B,CACnD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,WAAW,KAAQ,gCAAgC,CAC5D;AACA;AACA;AACA,OAASC,aAAa,KAAQ,gCAAgC,CAAC,wFAC/D,GAAMC,YAAW,CAAG,QAAdA,YAAW,MAQX,IAPJC,OAAM,MAANA,MAAM,CACNC,OAAO,MAAPA,OAAO,CACPC,SAAS,MAATA,SAAS,CACTC,MAAM,MAANA,MAAM,CACNC,KAAK,MAALA,KAAK,CACLC,QAAQ,MAARA,QAAQ,CACRC,YAAY,MAAZA,YAAY,CAEZ,cAA0Cf,QAAQ,CAAC,IAAI,CAAC,wCAAjDgB,aAAa,eAAEC,gBAAgB,eACtC;AACA;AACA,GAAMC,SAAQ,CAAGd,WAAW,EAAE,CAE9B,GAAMe,oBAAmB,6FAAG,oJAC1B;AACMC,WAAW,CAAC,CAChBC,EAAE,CAACT,MAAM,CACTD,SAAS,CAACA,SACZ,CAAC,CAEHO,QAAQ,CAACX,aAAa,CAACa,WAAW,CAAC,CAAC,CACpCF,QAAQ,CAACZ,WAAW,EAAE,CAAC,CACtBgB,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,CAAC,qDACzB,kBAVKL,oBAAmB,2CAUxB,CAEDlB,SAAS,CAAC,UAAM,CACdwB,OAAO,CAAChB,MAAM,CAAC,CAEjB,CAAC,CAAE,CAACA,MAAM,CAAEI,KAAK,CAAC,CAAC,CAEnB,GAAMY,QAAO,6FAAG,6KACIC,MAAK,2CAAoCjB,MAAM,EAAI,CACnEkB,OAAO,CAAE,CACPC,aAAa,kBAAYf,KAAK,CAChC,CACF,CAAC,CAAC,QAJIgB,GAAG,uCAKUA,IAAG,CAACC,IAAI,EAAE,QAAvBC,IAAI,gBACVd,gBAAgB,CAACc,IAAI,CAAC,CAAC,uDAExB,kBATKN,QAAO,2CASZ,CAED,GAAI,CAACT,aAAa,CAAE,CAClB;AACA,mBAAO,qBAAK,YAAU,EAAM,CAC9B,CAEA;AACA,mBACE,aAAK,SAAS,CAAC,aAAa,wBAC1B,YAAK,GAAG,CAAEA,aAAa,CAACgB,cAAe,CAAC,GAAG,CAAEhB,aAAa,CAACiB,IAAK,EAAG,cACnE,KAAC,UAAU,EACT,KAAK,CAAE,CAAEC,QAAQ,CAAE,OAAO,CAAEC,UAAU,CAAE,MAAM,CAAEC,KAAK,CAAE,OAAQ,CAAE,UAEhEpB,aAAa,CAACiB,IAAI,EACR,cAEb,KAAC,UAAU,WAAEvB,OAAO,EAAc,CACjCK,YAAY,GAAKN,MAAM,cACtB,KAAC,MAAM,EAAC,OAAO,CAAEU,mBAAoB,uBACnC,KAAC,UAAU,IAAG,EACP,CACPJ,YAAY,GAAKD,QAAQ,cAC3B,KAAC,MAAM,EAAC,OAAO,CAAEK,mBAAoB,uBACnC,KAAC,UAAU,IAAG,EACP,CACP,IAAI,GACJ,CAEV,CAAC,CAED,cAAeX,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}