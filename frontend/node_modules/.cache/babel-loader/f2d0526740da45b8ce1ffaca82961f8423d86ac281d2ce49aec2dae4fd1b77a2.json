{"ast":null,"code":"import _regeneratorRuntime from\"D:/memories/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/memories/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/memories/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Card}from'@mui/material';import{Button,CardHeader}from'@material-ui/core';import{Box}from'@mui/material';import{Typography}from'@material-ui/core';import{Paper}from'@material-ui/core';import CardMedia from'@mui/material/CardMedia';import React,{useEffect}from'react';import{useSelector}from'react-redux';// import { ThemeProvider } from '@mui/material/styles';\nimport{useState}from'react';import FlexBetween from'./FlexBetween';import WidgetWrapper from'./WidgetWrapper';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function UserItem(_ref){var person=_ref.person;var _useSelector=useSelector(function(state){return state.auth;}),user=_useSelector.user;var token=user.token;// console.log(user._id);\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFollowing=_useState2[0],setIsFollowing=_useState2[1];var _useState3=useState(\"Follow\"),_useState4=_slicedToArray(_useState3,2),buttonLabel=_useState4[0],setButtonLabel=_useState4[1];var TofollowUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:5000/api/users/follow/\".concat(person._id),{method:'PUT',headers:{Accept:'application/json','Content-Type':'application/json',Authorization:\"Bearer \".concat(token)}});case 2:res=_context.sent;_context.next=5;return res.json();case 5:data=_context.sent;// console.log(data);\nsetIsFollowing(true);setButtonLabel('Unfollow');case 8:case\"end\":return _context.stop();}},_callee);}));return function TofollowUser(){return _ref2.apply(this,arguments);};}();var ToUnfollowUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var res,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:5000/api/users/unfollow/\".concat(person._id),{method:'PUT',headers:{Accept:'application/json','Content-Type':'application/json',Authorization:\"Bearer \".concat(token)}});case 2:res=_context2.sent;_context2.next=5;return res.json();case 5:data=_context2.sent;//  console.log(data);\nsetIsFollowing(false);setButtonLabel('Follow');case 8:case\"end\":return _context2.stop();}},_callee2);}));return function ToUnfollowUser(){return _ref3.apply(this,arguments);};}();useEffect(function(){if(person.follower.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){setIsFollowing(true);setButtonLabel('Unfollow');}else{setIsFollowing(false);setButtonLabel('Follow');}},[setIsFollowing.person]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Box,{sx:{pl:'2rem',pr:'2rem',display:'flex',flexDirection:'row',// backgroundColor: '#E5BEEC',\n// alignItems: 'center',\nborderRadius:'5px',mb:'2vmax'},children:/*#__PURE__*/_jsxs(Box,{sx:{pb:'0.5rem',display:'flex',// bgcolor: 'grey',\n// width: '2rem',\nflexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(CardMedia,{sx:{height:40,width:60,borderRadius:100,borderColor:'blue',mt:1},component:\"img\",height:\"50\",image:person.profilePicture,alt:\"Paella dish\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",sx:{ml:'1rem'},children:person.name}),/*#__PURE__*/_jsx(Typography,{children:person.location}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:function onClick(){if(isFollowing){ToUnfollowUser();}else{TofollowUser();}},children:buttonLabel})]})})});}export default UserItem;","map":{"version":3,"names":["Card","Button","CardHeader","Box","Typography","Paper","CardMedia","React","useEffect","useSelector","useState","FlexBetween","WidgetWrapper","UserItem","person","state","auth","user","token","isFollowing","setIsFollowing","buttonLabel","setButtonLabel","TofollowUser","fetch","_id","method","headers","Accept","Authorization","res","json","data","ToUnfollowUser","follower","includes","JSON","parse","localStorage","getItem","pl","pr","display","flexDirection","borderRadius","mb","pb","alignItems","height","width","borderColor","mt","profilePicture","ml","name","location"],"sources":["D:/memories/frontend/src/components/UserItem.jsx"],"sourcesContent":["import { Card } from '@mui/material'\r\nimport { Button, CardHeader } from '@material-ui/core';\r\nimport{ Box} from '@mui/material';\r\nimport {Typography} from '@material-ui/core';\r\nimport {Paper} from '@material-ui/core';\r\nimport CardMedia from '@mui/material/CardMedia';\r\nimport React, { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux';\r\n// import { ThemeProvider } from '@mui/material/styles';\r\nimport { useState } from 'react';\r\nimport FlexBetween from './FlexBetween';\r\nimport WidgetWrapper from './WidgetWrapper'\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction UserItem({person}) \r\n\r\n\r\n{\r\n const { user } = useSelector((state) => state.auth);\r\n \r\n  const token = user.token;\r\n  // console.log(user._id);\r\n\r\n \r\nconst [isFollowing, setIsFollowing] = useState(false);\r\nconst [buttonLabel,setButtonLabel]=useState(\"Follow\");\r\n\r\n\r\n  \r\n  \r\n\r\n   const TofollowUser=async()=>{\r\n    const res = await fetch(\r\n      `http://localhost:5000/api/users/follow/${person._id}`,\r\n      { method:'PUT',\r\n        headers: {\r\n          Accept:'application/json',\r\n         'Content-Type':'application/json',\r\n         Authorization: `Bearer ${token}`,\r\n        },\r\n      }\r\n    );\r\n      const data=await res.json();\r\n      // console.log(data);\r\n      setIsFollowing(true);\r\n      setButtonLabel('Unfollow');\r\n     \r\n   }\r\n const ToUnfollowUser = async () => {\r\n   const res = await fetch(\r\n     `http://localhost:5000/api/users/unfollow/${person._id}`,\r\n     {\r\n       method: 'PUT',\r\n       headers: {\r\n         Accept: 'application/json',\r\n         'Content-Type': 'application/json',\r\n         Authorization: `Bearer ${token}`,\r\n       },\r\n     }\r\n   );\r\n   const data = await res.json();\r\n  //  console.log(data);\r\n   setIsFollowing(false);\r\n    setButtonLabel('Follow');\r\n };\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(()=>{\r\n\r\n \r\n\r\n   if(person.follower.includes(  JSON.parse(localStorage.getItem(\"user\"))._id)){\r\n    setIsFollowing(true);\r\n    setButtonLabel('Unfollow')\r\n   }\r\n   else{\r\n     setIsFollowing(false);\r\n      setButtonLabel('Follow');\r\n   }\r\n  },[setIsFollowing.person])\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      <Box\r\n        sx={{\r\n          pl: '2rem',\r\n          pr: '2rem',\r\n          display: 'flex',\r\n          flexDirection: 'row',\r\n          // backgroundColor: '#E5BEEC',\r\n          // alignItems: 'center',\r\n          borderRadius: '5px',\r\n          mb: '2vmax',\r\n        }}\r\n      >\r\n        <Box\r\n          sx={{\r\n            pb: '0.5rem',\r\n            display: 'flex',\r\n            // bgcolor: 'grey',\r\n            // width: '2rem',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n          }}\r\n        >\r\n          <CardMedia\r\n            sx={{\r\n              height: 40,\r\n              width: 60,\r\n              borderRadius: 100,\r\n              borderColor: 'blue',\r\n              mt: 1,\r\n            }}\r\n            component='img'\r\n            height='50'\r\n            image={person.profilePicture}\r\n            alt='Paella dish'\r\n          />\r\n\r\n          <Typography variant='h6' sx={{ ml: '1rem' }}>\r\n            {person.name}\r\n          </Typography>\r\n\r\n          <Typography>{person.location}</Typography>\r\n\r\n          <Button\r\n            variant='contained'\r\n            onClick={() => {\r\n              if (isFollowing) {\r\n                ToUnfollowUser();\r\n              } else {\r\n                TofollowUser();\r\n              }\r\n            }}\r\n          >\r\n            {buttonLabel}\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UserItem"],"mappings":"8UAAA,OAASA,IAAI,KAAQ,eAAe,CACpC,OAASC,MAAM,CAAEC,UAAU,KAAQ,mBAAmB,CACtD,OAAQC,GAAG,KAAO,eAAe,CACjC,OAAQC,UAAU,KAAO,mBAAmB,CAC5C,OAAQC,KAAK,KAAO,mBAAmB,CACvC,MAAOC,UAAS,KAAM,yBAAyB,CAC/C,MAAOC,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,KAAQ,aAAa,CACzC;AACA,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAOC,YAAW,KAAM,eAAe,CACvC,MAAOC,cAAa,KAAM,iBAAiB,8IAO3C,QAASC,SAAQ,MAGjB,IAHmBC,OAAM,MAANA,MAAM,CAIxB,iBAAiBL,WAAW,CAAC,SAACM,KAAK,QAAKA,MAAK,CAACC,IAAI,GAAC,CAA3CC,IAAI,cAAJA,IAAI,CAEX,GAAMC,MAAK,CAAGD,IAAI,CAACC,KAAK,CACxB;AAGF,cAAsCR,QAAQ,CAAC,KAAK,CAAC,wCAA9CS,WAAW,eAAEC,cAAc,eAClC,eAAmCV,QAAQ,CAAC,QAAQ,CAAC,yCAA9CW,WAAW,eAACC,cAAc,eAM9B,GAAMC,aAAY,6FAAC,uKACAC,MAAK,kDACqBV,MAAM,CAACW,GAAG,EACpD,CAAEC,MAAM,CAAC,KAAK,CACZC,OAAO,CAAE,CACPC,MAAM,CAAC,kBAAkB,CAC1B,cAAc,CAAC,kBAAkB,CACjCC,aAAa,kBAAYX,KAAK,CAC/B,CACF,CAAC,CACF,QATKY,GAAG,qCAUUA,IAAG,CAACC,IAAI,EAAE,QAArBC,IAAI,eACV;AACAZ,cAAc,CAAC,IAAI,CAAC,CACpBE,cAAc,CAAC,UAAU,CAAC,CAAC,qDAE7B,kBAhBKC,aAAY,2CAgBjB,CACH,GAAMU,eAAc,6FAAG,6KACHT,MAAK,oDACuBV,MAAM,CAACW,GAAG,EACtD,CACEC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACPC,MAAM,CAAE,kBAAkB,CAC1B,cAAc,CAAE,kBAAkB,CAClCC,aAAa,kBAAYX,KAAK,CAChC,CACF,CAAC,CACF,QAVKY,GAAG,uCAWUA,IAAG,CAACC,IAAI,EAAE,QAAvBC,IAAI,gBACX;AACCZ,cAAc,CAAC,KAAK,CAAC,CACpBE,cAAc,CAAC,QAAQ,CAAC,CAAC,uDAC3B,kBAhBKW,eAAc,2CAgBnB,CASAzB,SAAS,CAAC,UAAI,CAIb,GAAGM,MAAM,CAACoB,QAAQ,CAACC,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACd,GAAG,CAAC,CAAC,CAC3EL,cAAc,CAAC,IAAI,CAAC,CACpBE,cAAc,CAAC,UAAU,CAAC,CAC3B,CAAC,IACG,CACFF,cAAc,CAAC,KAAK,CAAC,CACpBE,cAAc,CAAC,QAAQ,CAAC,CAC3B,CACD,CAAC,CAAC,CAACF,cAAc,CAACN,MAAM,CAAC,CAAC,CAa1B,mBACE,sCACE,KAAC,GAAG,EACF,EAAE,CAAE,CACF0B,EAAE,CAAE,MAAM,CACVC,EAAE,CAAE,MAAM,CACVC,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,KAAK,CACpB;AACA;AACAC,YAAY,CAAE,KAAK,CACnBC,EAAE,CAAE,OACN,CAAE,uBAEF,MAAC,GAAG,EACF,EAAE,CAAE,CACFC,EAAE,CAAE,QAAQ,CACZJ,OAAO,CAAE,MAAM,CACf;AACA;AACAC,aAAa,CAAE,QAAQ,CACvBI,UAAU,CAAE,QACd,CAAE,wBAEF,KAAC,SAAS,EACR,EAAE,CAAE,CACFC,MAAM,CAAE,EAAE,CACVC,KAAK,CAAE,EAAE,CACTL,YAAY,CAAE,GAAG,CACjBM,WAAW,CAAE,MAAM,CACnBC,EAAE,CAAE,CACN,CAAE,CACF,SAAS,CAAC,KAAK,CACf,MAAM,CAAC,IAAI,CACX,KAAK,CAAErC,MAAM,CAACsC,cAAe,CAC7B,GAAG,CAAC,aAAa,EACjB,cAEF,KAAC,UAAU,EAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAE,CAAEC,EAAE,CAAE,MAAO,CAAE,UACzCvC,MAAM,CAACwC,IAAI,EACD,cAEb,KAAC,UAAU,WAAExC,MAAM,CAACyC,QAAQ,EAAc,cAE1C,KAAC,MAAM,EACL,OAAO,CAAC,WAAW,CACnB,OAAO,CAAE,kBAAM,CACb,GAAIpC,WAAW,CAAE,CACfc,cAAc,EAAE,CAClB,CAAC,IAAM,CACLV,YAAY,EAAE,CAChB,CACF,CAAE,UAEDF,WAAW,EACL,GACL,EACF,EACL,CAEP,CAEA,cAAeR,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}